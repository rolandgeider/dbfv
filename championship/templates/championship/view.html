{% extends "base.html" %}
{% load dbfv_extras %}

{% block title %}Meisterschaft "{{ object.name }}"{% endblock %}

{% block scripts %}
{% endblock %}

{% block content %}

<table class="table">
    <tr>
        <th>Nr.</th>
        <td>
            {{ object.pk }}
        </td>
    </tr>
    <tr>
        <th>Name</th>
        <td>{{ object.name }}</td>
    </tr>
    <tr>
        <th>Datum</th>
        <td>{{ object.date }}</td>
    </tr>
    <tr>
        <th>Bundesland</th>
        <td>{{ object.state }}</td>
    </tr>
    <tr>
        <th>Kategorien</th>
        <td>

            <p>
            {% for category in object.categories.all %}
                {{ category }}
                <br>
            {% empty %}
                <em>Keine Kategorien vorhanden</em>
            {% endfor %}
            </p>
        </td>
    </tr>
</table>

<h3>Teilnehmer</h3>
<table class="table">
    <tr>
        <th></th>
        <th>Teilnehmernr.</th>
        <th>Kategorie</th>
        <th>Platzierung</th>
        <th>Teilnehmer</th>
        <th>Studio</th>
    </tr>
{% for participation in object.participation_set.all %}
    {% for placement in participation.placement_set.all %}
    <tr>
        <td>
            <a href="{% url 'championship:participation:view' participation.pk %}">
                <span class="glyphicon glyphicon-eye-open"></span>
            </a>
        </td>
        <td>{{ participation.participation_nr }}</td>
        <td>{{ placement.category }}</td>
        <td>{{ placement.placement }}</td>
        <td><a href="{% url 'submission-view' participation.submission.pk %}">{{ participation.submission.get_name }}</a></td>
        <td><a href="{% url 'gym-view' participation.submission.gym.pk %}">{{ participation.submission.gym.name }}</a></td>
    </tr>
    {% endfor %}
{% endfor %}
</table>
{% endblock %}

{% block sidebar %}
<div class="sidebar-box">
    <h4>Optionen</h4>
    <p>
        <a href="{% url 'championship:championship:edit' object.id %}">Bearbeiten</a>
    </p>

    <p>
        <a href="{% url 'championship:championship:export-csv' object.id %}">Teilnehmer exportieren</a>
    </p>

    <p>
        <a href="{% url 'championship:championship:delete' object.id %}">LÃ¶schen</a>
    </p>
</div>
{% endblock %}

